<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ID Card Print Portal</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background:#f5f5f5;
    padding:20px;
  }
  h1 { text-align:center; }

  /* Tabs */
  .tabs {
    display:flex;
    justify-content:center;
    margin-bottom:20px;
    gap:10px;
  }
  .tabs button {
    padding:10px 20px;
    font-size:16px;
    cursor:pointer;
    border:none;
    border-radius:6px;
    background:#ddd;
    transition:background 0.3s;
  }
  .tabs button.active { background:#4CAF50; color:#fff; }

  .upload-section {
    max-width:600px;
    margin:0 auto 20px;
    background:#fff;
    padding:15px;
    border-radius:8px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
  }
  .upload-section label {
    font-weight:bold;
    display:block;
    margin-top:10px;
  }
  .rotate-buttons {
    display:flex;
    gap:10px;
    margin-top:5px;
  }
  .print-button {
    text-align:center;
    margin-top:20px;
  }
  button {
    padding:8px 16px;
    font-size:16px;
    margin:5px;
    cursor:pointer;
  }

  /* A4 Page */
  .a4-page {
    width:21cm;
    height:29.7cm;
    margin:0 auto;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:1cm;
  }
  .card-image {
    object-fit:contain;
    transform-origin:center center;
    transition:transform 0.3s ease;
    display:block;
  }

  /* Card size classes (adjust as needed) */
  .voter-size  { width:5.5cm; height:8.5cm; }
  .pan-size    { width:8.6cm; height:5.4cm; }
  .aadhaar-size{ width:8.6cm; height:5.4cm; }

  /* PRINTING */
  @media print {
    @page { size:A4 portrait; margin:0; }
    body { margin:0; padding:0; }
    body * { visibility:hidden; }
    .a4-page, .a4-page * { visibility:visible; }
    .a4-page {
      position:absolute;
      top:0; left:0;
      width:100vw; height:100vh;
      background:none;
      box-shadow:none;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:1cm;
    }
  }
</style>
</head>
<body>

<h1>ID Card Print Portal</h1>

<!-- Tabs -->
<div class="tabs">
  <button class="tab-btn active" data-card="voter">Voter Card</button>
  <button class="tab-btn" data-card="pan">PAN Card</button>
  <button class="tab-btn" data-card="aadhaar">Aadhaar Card</button>
</div>

<!-- Upload Sections -->
<div id="voter" class="upload-section card-section">
  <h2>Upload Voter Card (Front & Back)</h2>
  <label>Front Side:</label>
  <input type="file" id="voter-front" accept="image/*">
  <div class="rotate-buttons">
    <button onclick="rotateImage('voter-front',-90)">‚ü≤ Rotate Left</button>
    <button onclick="rotateImage('voter-front',90)">‚ü≥ Rotate Right</button>
  </div>

  <label>Back Side:</label>
  <input type="file" id="voter-back" accept="image/*">
  <div class="rotate-buttons">
    <button onclick="rotateImage('voter-back',-90)">‚ü≤ Rotate Left</button>
    <button onclick="rotateImage('voter-back',90)">‚ü≥ Rotate Right</button>
  </div>

  <div class="print-button">
    <button onclick="printPage(false)">üñ®Ô∏è Print (Color)</button>
    <button onclick="printPage(true)">üñ®Ô∏è Print (B/W)</button>
  </div>
</div>

<div id="pan" class="upload-section card-section" style="display:none;">
  <h2>Upload PAN Card (Front & Back)</h2>
  <label>Front Side:</label>
  <input type="file" id="pan-front" accept="image/*">
  <div class="rotate-buttons">
    <button onclick="rotateImage('pan-front',-90)">‚ü≤ Rotate Left</button>
    <button onclick="rotateImage('pan-front',90)">‚ü≥ Rotate Right</button>
  </div>

  <label>Back Side:</label>
  <input type="file" id="pan-back" accept="image/*">
  <div class="rotate-buttons">
    <button onclick="rotateImage('pan-back',-90)">‚ü≤ Rotate Left</button>
    <button onclick="rotateImage('pan-back',90)">‚ü≥ Rotate Right</button>
  </div>

  <div class="print-button">
    <button onclick="printPage(false)">üñ®Ô∏è Print (Color)</button>
    <button onclick="printPage(true)">üñ®Ô∏è Print (B/W)</button>
  </div>
</div>

<div id="aadhaar" class="upload-section card-section" style="display:none;">
  <h2>Upload Aadhaar Card (Front & Back)</h2>
  <label>Front Side:</label>
  <input type="file" id="aadhaar-front" accept="image/*">
  <div class="rotate-buttons">
    <button onclick="rotateImage('aadhaar-front',-90)">‚ü≤ Rotate Left</button>
    <button onclick="rotateImage('aadhaar-front',90)">‚ü≥ Rotate Right</button>
  </div>

  <label>Back Side:</label>
  <input type="file" id="aadhaar-back" accept="image/*">
  <div class="rotate-buttons">
    <button onclick="rotateImage('aadhaar-back',-90)">‚ü≤ Rotate Left</button>
    <button onclick="rotateImage('aadhaar-back',90)">‚ü≥ Rotate Right</button>
  </div>

  <div class="print-button">
    <button onclick="printPage(false)">üñ®Ô∏è Print (Color)</button>
    <button onclick="printPage(true)">üñ®Ô∏è Print (B/W)</button>
  </div>
</div>

<!-- A4 print area -->
<div class="a4-page" id="a4Page">
  <img id="voter-front-preview"   class="card-image voter-size" alt="">
  <img id="voter-back-preview"    class="card-image voter-size" alt="">
  <img id="pan-front-preview"     class="card-image pan-size" style="display:none;" alt="">
  <img id="pan-back-preview"      class="card-image pan-size" style="display:none;" alt="">
  <img id="aadhaar-front-preview" class="card-image aadhaar-size" style="display:none;" alt="">
  <img id="aadhaar-back-preview"  class="card-image aadhaar-size" style="display:none;" alt="">
</div>

<script>
  // --- Tab switching ---
  const tabBtns=document.querySelectorAll('.tab-btn');
  const sections=document.querySelectorAll('.card-section');
  tabBtns.forEach(btn=>{
    btn.addEventListener('click',()=>{
      tabBtns.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      sections.forEach(sec=>sec.style.display='none');
      document.getElementById(btn.dataset.card).style.display='block';
      // show/hide previews
      updatePreviewVisibility();
    });
  });

  // --- Image handling & rotation ---
  const rotation={};
  function handleUpload(id,previewId){
    const file=document.getElementById(id).files[0];
    if(file){
      document.getElementById(previewId).src=URL.createObjectURL(file);
      rotation[previewId]=0;
      document.getElementById(previewId).style.transform='rotate(0deg)';
    }
  }
  ['voter','pan','aadhaar'].forEach(type=>{
    ['front','back'].forEach(side=>{
      document.getElementById(`${type}-${side}`)
        .addEventListener('change',()=>handleUpload(`${type}-${side}`,`${type}-${side}-preview`));
    });
  });
  function rotateImage(inputId,degrees){
    const previewId=inputId+'-preview';
    rotation[previewId]=( (rotation[previewId]||0) + degrees + 360 ) % 360;
    document.getElementById(previewId).style.transform=`rotate(${rotation[previewId]}deg)`;
  }

  // --- Printing ---
  function printPage(bw=false){
    if(bw){ document.body.style.filter='grayscale(100%)'; }
    else  { document.body.style.filter='none'; }
    setTimeout(()=>{
      window.print();
      document.body.style.filter='none';
    },300);
  }

  // Show only selected card previews on A4 page
  function updatePreviewVisibility(){
    const active=document.querySelector('.tab-btn.active').dataset.card;
    ['voter','pan','aadhaar'].forEach(type=>{
      ['front','back'].forEach(side=>{
        document.getElementById(`${type}-${side}-preview`).style.display =
          (type===active)?'block':'none';
      });
    });
  }
  updatePreviewVisibility();
</script>
</body>
</html>
